# Decision Log

| Date | Decision | Rationale |
|------|----------|-----------|
| 2025-10-06 | Added minimal RD conservation harness run_rd_conservation.py using IO helper. | Implements initial controls: diffusion-only mass conservation and reaction-only Q-invariant convergence (RK4); logs artifacts under standardized outputs; aligns with periodic BC default for Obj-A/B. |
| 2025-10-06 | Cleaned and deduplicated rd_conservation harness file; fixed embedded duplication and trailing stray code; ensured sidecar JSON/CSV outputs and CLI are intact. | Prior patch corruption embedded a duplicate script block inside StepSpec and left stray print at EOF. The cleanup restores a single, valid module and preserves experimental artifacts per PAPER_STANDARDS. |
| 2025-10-06 | Paused Codacy CLI auto-analysis per user request to reduce CPU usage. | User reported high CPU from Codacy runs. I will skip Codacy tool invocations for this session unless explicitly asked to run them again. |
| 2025-10-06 | Implement failed_runs routing for RD harness artifacts based on pass/fail gates. | Added failed flag propagation to figure_path/log_path in q_invariant_convergence, objA_objB_sweeps, and lyapunov_monitor so failing controls and experiments write figures and logs under outputs/*/rd_conservation/failed_runs. |
| 2025-10-06 | Added metriplectic experiment scaffold with new modules and runner; preserved RD harness untouched. | User requested to start next experiment. To maintain reproducibility and follow PAPER_STANDARDS, created additive modules (j_step, compose) and a new run_metriplectic.py with separate outputs under metriplectic/. Reuses DG RD step for M and adds spectral J-step. |
| 2025-10-06 | Switched |ΔS| panel x-axis to logarithmic scale with log-spaced bins and LogLocator/LogFormatter; added label rotation and subplot spacing. | Reduces x-axis label crowding for wide dynamic ranges and fixes previous MaxNLocator name error; improves readability while preserving quantitative detail. |
| 2025-10-06 | Add optional tag support for artifact slugs in metriplectic harness; keep changes additive and param-gated. | Preserves reproducibility: defaults unchanged; artifacts get tag suffix only when spec.params.tag or spec.tag is provided. Avoids collisions across phases and allows clean side-by-side runs. |
| 2025-10-06 | Endorse spectral-DG as an optional, param-gated variant lifting JMJ slope to ~2.94 while preserving H-theorem; keep stencil-DG as baseline with commutator-limited narrative. | Small, bounded improvement that aligns J and M discretizations; avoids altering defaults or past reproducibility; clarifies gates for both variants in RESULTS. |
| 2025-10-06 | Created RESULTS_KG_RD_Metriplectic.md with tagged artifacts and gates; aligned with spectral-DG primary profile. | Document KG⊕RD initial run (kgRD-v1), pin artifact paths, and establish gate outcomes to guide next tuning (energy bookkeeping and two-grid measure over (phi, pi)). |
| 2025-10-06 | Extend ROADMAP with Proposals Index and add gravity/dark-photon/quantum-gravity milestones | User requested a backfilled proposals index and inclusion of dark photons plus gravity/quantum gravity threads; added sections link to existing proposals and documents to centralize planning context. |
| 2025-10-06 | Added dark-photon quick modules: run_dp_noise_budget.py and run_dp_fisher_check.py under derivation/code/physics/dark_photons/ with gates and artifacts routed via IO helpers. | Implements the planned dark-photon stubs: noise budget sanity + regime annotation and Fisher consistency ≤10% rel-error gate, producing PNG/CSV/JSON artifacts in the dark_photons domain per canon. |
| 2025-10-06 | Adopt strict pre-registration discipline: no experiments before proposal approval; proposals must define hypotheses, KPIs, and gates a priori; quarantine any engineering smoke runs from scientific claims. | Ensures rigor and prevents bias; separates modeling from execution and aligns with PAPER_STANDARDS. |
| 2025-10-07 | Enforced pre-registration guardrails for dark-photon runners and quarantined existing smoke artifacts. | Added --allow-unapproved flag with default deny; stamped JSON logs with policy (pre_registered, engineering_only, quarantined) and routed artifacts accordingly; updated VALIDATION_METRICS to mark DP KPIs as planned; added quarantine READMEs. Aligns with strict pre-registration discipline and PAPER_STANDARDS. |
| 2025-10-07 | Added canonical runtime equations module `Derivation/code/common/vdm_equations.py` and minimal gated tests. | Centralize evaluators for equations in Derivation/EQUATIONS.md to a single import; makes physics runners consistent and auditable. Added package __init__.py files to stabilize imports. |
| 2025-10-08 | Enforce proposal and tag-specific schema approval before running experiments. | Prevents unreviewed runs. The approval.py now validates APPROVAL.json with required fields, checks proposal file existence, locates a matching JSON schema with tag consistency, and verifies approver. io_paths defaults to require approval so artifacts quarantine by default unless approved. |
| 2025-10-08 | Added approve_tag.py helper to codify approval updates to domain manifests. | Reduces manual edits and errors when stamping approvals; keeps secrets out of repo while ensuring consistent fields across tags. |
| 2025-10-08 | Moved approval system into new package path common.authorization and updated runner imports. | User renamed folder and requested separation from common utilities; adding a minimal __init__.py and updating imports preserves functionality without mixing with constants/io_paths/vdm_equations. |
