# Decision Log

| Date | Decision | Rationale |
|------|----------|-----------|
| 2025-10-06 | Added minimal RD conservation harness run_rd_conservation.py using IO helper. | Implements initial controls: diffusion-only mass conservation and reaction-only Q-invariant convergence (RK4); logs artifacts under standardized outputs; aligns with periodic BC default for Obj-A/B. |
| 2025-10-06 | Cleaned and deduplicated rd_conservation harness file; fixed embedded duplication and trailing stray code; ensured sidecar JSON/CSV outputs and CLI are intact. | Prior patch corruption embedded a duplicate script block inside StepSpec and left stray print at EOF. The cleanup restores a single, valid module and preserves experimental artifacts per PAPER_STANDARDS. |
| 2025-10-06 | Paused Codacy CLI auto-analysis per user request to reduce CPU usage. | User reported high CPU from Codacy runs. I will skip Codacy tool invocations for this session unless explicitly asked to run them again. |
| 2025-10-06 | Implement failed_runs routing for RD harness artifacts based on pass/fail gates. | Added failed flag propagation to figure_path/log_path in q_invariant_convergence, objA_objB_sweeps, and lyapunov_monitor so failing controls and experiments write figures and logs under outputs/*/rd_conservation/failed_runs. |
| 2025-10-06 | Added metriplectic experiment scaffold with new modules and runner; preserved RD harness untouched. | User requested to start next experiment. To maintain reproducibility and follow PAPER_STANDARDS, created additive modules (j_step, compose) and a new run_metriplectic.py with separate outputs under metriplectic/. Reuses DG RD step for M and adds spectral J-step. |
| 2025-10-06 | Switched |ΔS| panel x-axis to logarithmic scale with log-spaced bins and LogLocator/LogFormatter; added label rotation and subplot spacing. | Reduces x-axis label crowding for wide dynamic ranges and fixes previous MaxNLocator name error; improves readability while preserving quantitative detail. |
| 2025-10-06 | Add optional tag support for artifact slugs in metriplectic harness; keep changes additive and param-gated. | Preserves reproducibility: defaults unchanged; artifacts get tag suffix only when spec.params.tag or spec.tag is provided. Avoids collisions across phases and allows clean side-by-side runs. |
| 2025-10-06 | Endorse spectral-DG as an optional, param-gated variant lifting JMJ slope to ~2.94 while preserving H-theorem; keep stencil-DG as baseline with commutator-limited narrative. | Small, bounded improvement that aligns J and M discretizations; avoids altering defaults or past reproducibility; clarifies gates for both variants in RESULTS. |
| 2025-10-06 | Created RESULTS_KG_RD_Metriplectic.md with tagged artifacts and gates; aligned with spectral-DG primary profile. | Document KG⊕RD initial run (kgRD-v1), pin artifact paths, and establish gate outcomes to guide next tuning (energy bookkeeping and two-grid measure over (phi, pi)). |
| 2025-10-06 | Extend ROADMAP with Proposals Index and add gravity/dark-photon/quantum-gravity milestones | User requested a backfilled proposals index and inclusion of dark photons plus gravity/quantum gravity threads; added sections link to existing proposals and documents to centralize planning context. |
| 2025-10-06 | Added dark-photon quick modules: run_dp_noise_budget.py and run_dp_fisher_check.py under derivation/code/physics/dark_photons/ with gates and artifacts routed via IO helpers. | Implements the planned dark-photon stubs: noise budget sanity + regime annotation and Fisher consistency ≤10% rel-error gate, producing PNG/CSV/JSON artifacts in the dark_photons domain per canon. |
| 2025-10-06 | Adopt strict pre-registration discipline: no experiments before proposal approval; proposals must define hypotheses, KPIs, and gates a priori; quarantine any engineering smoke runs from scientific claims. | Ensures rigor and prevents bias; separates modeling from execution and aligns with PAPER_STANDARDS. |
| 2025-10-07 | Enforced pre-registration guardrails for dark-photon runners and quarantined existing smoke artifacts. | Added --allow-unapproved flag with default deny; stamped JSON logs with policy (pre_registered, engineering_only, quarantined) and routed artifacts accordingly; updated VALIDATION_METRICS to mark DP KPIs as planned; added quarantine READMEs. Aligns with strict pre-registration discipline and PAPER_STANDARDS. |
| 2025-10-07 | Added canonical runtime equations module `Derivation/code/common/vdm_equations.py` and minimal gated tests. | Centralize evaluators for equations in Derivation/EQUATIONS.md to a single import; makes physics runners consistent and auditable. Added package __init__.py files to stabilize imports. |
| 2025-10-08 | Enforce proposal and tag-specific schema approval before running experiments. | Prevents unreviewed runs. The approval.py now validates APPROVAL.json with required fields, checks proposal file existence, locates a matching JSON schema with tag consistency, and verifies approver. io_paths defaults to require approval so artifacts quarantine by default unless approved. |
| 2025-10-08 | Added approve_tag.py helper to codify approval updates to domain manifests. | Reduces manual edits and errors when stamping approvals; keeps secrets out of repo while ensuring consistent fields across tags. |
| 2025-10-08 | Moved approval system into new package path common.authorization and updated runner imports. | User renamed folder and requested separation from common utilities; adding a minimal __init__.py and updating imports preserves functionality without mixing with constants/io_paths/vdm_equations. |
| 2025-10-08 | Switched approval key derivation to HMAC(domain:script:tag) with priority: tag_secret > domain_key. | User’s latest policy requires script-scoped approvals and secret-first priority to tighten control and allow per-runner separation; updates applied to runtime checker and CLI. |
| 2025-10-08 | Store script-based enforcement exemptions in approvals DB and manage via approve_tag.py 'exempt' subcommands. | Avoids insecure file-based bypass, centralizes control with admin verification, and aligns with script-scoped approval policy. |
| 2025-10-08 | Split approvals storage into two SQLite files: public approval.db and admin-only approval_admin.db. | Allows runtime and read-only CLI to read secrets freely while requiring admin password for any write operations; isolates admin credentials from public data. |
| 2025-10-08 | Updated common/authorization/README.md to align with current approval policy and DB architecture. | README was outdated; now documents script-scoped HMAC with tag_secret priority, public/admin DB split, interactive password for writes only, status/exempt commands, path discovery, and manifest field requirements. |
| 2025-10-08 | Adopt dual-track approach for causal DAG auditing: (1) reusable common helper module for order-based diagnostics, (2) separate pre-registered experiment runner to produce auditable artifacts with approvals. | Keeps runtime/model untouched while enabling physics-aligned, background-free audits; ensures reproducibility via approvals/RESULTS while maximizing reuse across domains. |
| 2025-10-08 | Adopt common.plotting.core helpers for all figures in causality runner. | Removes boilerplate, centralizes style and saving through io_paths.figure_path (policy-aware), and adds a JSON sidecar for plot spec and stats. |
| 2025-10-08 | Causality audit ingestion aligned to runtime logs: accept 't' (tick) as a default event ID and support nested UTD payload fields for id/time. | Runtime events.jsonl merges tick metrics at top-level (t, ts) and UTD records keep time under payload; prior runs skipped events due to missing id. This change prevents empty DAGs without guessing and remains backward compatible. |
| 2025-10-08 | Hardened causality DAG audit: adopted neuron head expansion ingestion, switched cycle check to iterative Kahn’s algorithm, enforced script-scoped approvals and gating, integrated plotting core (PNG-only) and results DB; executed approved v1 run on 10k_Neurons producing a large acyclic DAG and clean scaling plots. | Resolved empty-DAG and performance issues by using domain-specific head arrays to define events and replacing recursive cycle check; aligned with approvals/quarantine policy; produced auditable artifacts and metrics with gates to prevent pass-with-nothing. |
| 2025-10-08 | Implemented within-tick trail chaining and macro VAR-based Granger DAG (with BH-FDR) in the causality audit runner; executed approved v1 runs producing enriched DAGs and macro causal graphs with interpretable edges. | Trail chaining leverages walker path information to introduce meaningful intra-tick structure beyond pure time-order; macro VAR Granger captures system-level influences with statistical control, yielding interpretable edges among vt_walkers, vt_coverage, td_signal, and evt_*_counts. Both align with the goal to make results more interesting and useful while preserving approvals, gating, and PNG-only artifacts. |
| 2025-10-08 | Added VDM-A-013..VDM-A-021 to Derivation/ALGORITHMS.md (Metriplectic integrators & QC, FRW residual QC, A6 scaling collapse) with auto-index and change log updates; causality content explicitly excluded from canon per scope. | Implements “algorithms-first” canon update using only existing code/results; preserves file style, adds anchors and index items, and fixes markdown lint issues. |
| 2025-10-08 | Added equations VDM-E-090..VDM-E-094 to EQUATIONS.md to support new canon algorithms (two-grid error, Strang defect, discrete grid Lyapunov L_h, FRW continuity residual & RMS, scaling-collapse envelope). | Provides MathJax-rendered definitions referenced by VDM-A-013..021; aligned to existing repo patterns; no causality content introduced. |
| 2025-10-08 | Linked metriplectic degeneracy row to concrete structure-check runner and added a RESULTS page. | Make the PLAUSIBLE→PROVEN claim actionable with a specific runner and a standards-compliant RESULTS doc awaiting approved artifacts. |
| 2025-10-08 | Created metriplectic structure-check spec and set tag for approval. | User requested an approvable spec and explicit tag to run the degeneracy checks; added specs/struct_checks.v1.json and documented tag 'struct-v1' in RESULTS. |
| 2025-10-08 | Rewrote Metriplectic proposal into a complete, template-compliant document with hypotheses, setup, runplan, gates, and references. | User requested a legitimate proposal; aligned with PROPOSAL_PAPER_TEMPLATE.md and current metriplectic tags/specs to support approvals and canon promotion. |
| 2025-10-08 | Integrated runtime approval enforcement into kg_noether.py and removing __future__ annotations to fix dataclass import error. | Approval check required to route artifacts out of quarantine; dataclass import error likely due to Python 3.13 interaction with postponed evaluation. |
| 2025-10-08 | Identified approval_key mismatch due to script name change in kg_noether runner from kg_noether.py to kg_noether after refactor. | HMAC policy uses domain:script:tag; manifest key uses 'kg_noether.py' version while runtime environment derives 'kg_noether' stem causing mismatch. |
| 2025-10-08 | Promoted J-only Noether energy/momentum conservation row to PROVEN in CANON_PROGRESS.md. | Approved run produced figure and CSV with drift far below gate; reversibility satisfied, meeting canon promotion criteria. |
| 2025-10-08 | Added RESULTS_KG_Noether_Invariants_v1.md documenting discrete energy/momentum conservation and interpretation. | Needed canonical RESULTS artifact parallel to structure checks for full provenance and future audit. |
| 2025-10-08 | Updated RESULTS_KG_Noether_Invariants_v1.md to enforce MathJax formatting for all equations and metrics. | User requirement: all math must render with proper MathJax delimiters on GitHub; improved clarity and consistency. |
| 2025-10-08 | Prepared data metrics for promoting RD Lyapunov non-increase row; collected per-step ΔΣ stats and convergence sample. | Need quantitative gate narrative (abs max drift and negative sign indicating monotonic decrease within tolerance) to justify promotion to PROVEN. |
| 2025-10-09 | Identified remaining canon gaps: Telegraph-RD, Agency Field (curvature & stability), Junction policy, RD Lyapunov formatting, Metriplectic two-grid JMJ improvement, Dark Photons results pending, Information SIE, Quantum Gravity bridge, Topology loop quench. | Search of CANON_PROGRESS and proposals vs results reveals placeholders lacking artifacts or pending RESULTS docs. |
| 2025-10-09 | Added tachyonic condensation domain runner, proposal, specs, and schemas with approval manifest. | Implements pre-registered tags tube-spectrum-v1 and tube-condensation-v1 enabling canon artifacts for finite-radius tachyonic tube modes and condensation energy scan; aligns with approval and io_paths policy. |
| 2025-10-09 | Identified gating failures: spectrum coverage 13% (only ℓ>=7 roots); condensation curvature fit missing (fit window insufficient). | Current parameters (mu=1, R sweep, ell_max=8) yield only high-ℓ roots within κ<μ/c domain; need parameter or bracket adjustments and quadratic fit refinement to satisfy gates. |
| 2025-10-09 | Adopted physically-admissible coverage for spectrum gate with dual metrics (coverage_phys for gating, coverage_raw for transparency). | Original denominator penalized (R,ℓ) pairs with no secular root in principle, creating misleading drops (e.g., near R≈3). Using a θ-scan sign-change heuristic to define admissibility aligns the metric with the physics. We also expose coverage_raw to preserve comparability. |
| 2025-10-09 | Codified tachyonic tube KPI outputs via JSON schemas with cov_phys as primary metric. | Added tube-spectrum-summary-v1.schema.json and tube-condensation-summary-v1.schema.json; updated SCHEMAS.md to document fields and anchors. This formalizes gates and improves auditability. |
| 2025-10-09 | Updated policy stance: EFT/KG is an active branch (not quarantined). | User clarified EFT is not quarantined. Updated OVERVIEW.md to remove quarantine language and reflect EFT/KG as an active, KPI-gated branch alongside RD. |
| 2025-10-09 | Updated policy language to mark EFT/KG as an active, KPI-gated branch across key docs (OVERVIEW, FUVDM_Overview, CORRECTIONS, EQUATIONS, ROADMAP, OPEN_QUESTIONS, Foundations/continuum_stack). Preserved quarantine only for unapproved runs via IO policy. | Aligns with user directive that EFT is not quarantined; keeps approvals/quarantine mechanism intact for non-approved executions. Also resolves narrative-policy divergence revealed by repo-wide scan. |
| 2025-10-09 | Enforced latest-only policy across canonical docs by adding scope banners to EQUATIONS.md, SYMBOLS.md, and OVERVIEW.md; removed historical Change Log from EQUATIONS.md; added tube symbol anchors (R, ℓ, κ) with cross-refs. | User directed that CORRECTIONS.md remains chronological while equations/symbols/overview should present only the latest state. This change aligns canon policy and improves cross-referencing for tachyonic tube KPIs. |
| 2025-10-09 | Standardized 'Last updated: 2025-10-09 (commit 09f871a)' stamps across remaining canonical registries (CONSTANTS.md, UNITS_NORMALIZATION.md, BC_IC_GEOMETRY.md, CANON_MAP.md). | Make provenance explicit and consistent with the latest-only canon policy across all registries; aligns with prior stamps added to EQUATIONS, SYMBOLS, OVERVIEW, ALGORITHMS, VALIDATION_METRICS, DATA_PRODUCTS, SCHEMAS, CANON_PROGRESS, and ROADMAP. |
| 2025-10-09 | Standardized Last updated stamps across additional root canonical Derivation docs (AXIOMS, DIMENSIONLESS_CONSTANTS, FUVDM_Overview, IMPLEMENTATION_GAPS_ANALYSIS, NAMING_CONVENTIONS, OPEN_QUESTIONS, README, UToE_REQUIREMENTS) using current HEAD short hash 09f871a. | User requires all canonical registries in root Derivation to carry a date+commit stamp. Verified stamps via grep; preserved minimal diffs and noted existing markdownlint warnings without reflowing content. |
| 2025-10-09 | Completed and extended Derivation/VDM_OVERVIEW.md with sections IX–XV to encompass the full theory (limitations, unified architecture/canon map, KPI gates, provenance/policy, roadmap, references, summary). | User requested completion from cut-off; aligns with latest-only canon policy and integrates active EFT/KG branch, tachyonic KPIs, metriplectic/fluid validations, and domain map. |
| 2025-10-13 | Adopt near-term sequence: (1) KG J-only energy-oscillation QC (ΔE ~ Δt^2, time-reversal), (2) Passive Thermodynamic Routing v2 with RJ fit and no-switch invariance, then (3) resume metriplectic J⊕M + agency coupling. | Certify the conservative limb as a precise measuring instrument before coupling; routing v2 has sharpened gates and metrics; sequencing reduces confounds and aligns with canon KPIs. |
| 2025-10-13 | Posted RESULTS_KG_Energy_Oscillation_v1.md pinning artifacts and gates; fixed plot label bug and executed approved run. | Recorded provenance and gates for KG-energy-osc-v1; this promotes the conservative limb QC to PROVEN-ready and supports downstream routing v2. Plot MathJax fix ensures reproducible figure generation. |
| 2025-10-13 | Registered KG energy-oscillation summary schema in SCHEMAS.md and bumped canon stamp. | Aligns canonical schema index with newly certified KG J-only QC instrument (KG-energy-osc-v1); ensures auditability and cross-referencing before proceeding to Thermodynamic Routing v2. |
| 2025-10-13 | Promoted Thermodynamic Routing v2 prereg as canonical; added supersedence banner and appended JMJ/Strang-defect diagnostic as Appendix A. | User requested single-doc model with v2 as canon and retention of unique diagnostics from earlier No-Switch draft. Kept diffs minimal and normalized markdown lints. |
| 2025-10-13 | Relax RJ gate for symmetric smoke runs; keep RJ as a KPI only for prereg geometry runs. Implement outflux-only semantics for right-boundary flux in thermo_routing runner. | Smoke runs were failing solely on RJ-fit because the field quickly homogenizes, leaving no modal power. H-theorem and no-switch plumbing gates already pass. Outflux-only fixes negative rho and aligns with routing semantics. |
| 2025-10-13 | Enriched thermo_routing runner summary JSON with top-level blocks (commit/env/determinism/RJ/flux/H-theorem/robustness), added artifact_bundle_id, and replaced subprocess git call with .git HEAD parsing. | Meets RESULTS standards (captions quote JSON), avoids linter security warnings, and improves auditability and provenance without changing gates or numerics. Also added a flux-density strip inset to the geometry figure for clarity. |

| 2025-10-13 | Introduced per-experiment wrapper scripts for Thermodynamic Routing v2 (smoke_symm and prereg_biased). | Preserve provenance by keeping the legacy runner untouched and using dedicated entrypoints that set VDM_RUN_SCRIPT, aligning with script-scoped approvals and RESULTS routing. |
| 2025-10-13 | Align to current HEAD contents of Derivation/code/physics/thermo_routing/run_thermo_routing.py. | User provided authoritative file; runner sets VDM_RUN_SCRIPT, includes outflux-only flux, RJ diagnostics, top-level JSON. We will not modify the legacy runner and will treat this file as the source of truth going forward. |
| 2025-10-13 | Added new prereg tag thermo-routing-v2-prereg-biased-main with schema and spec; created dedicated wrapper entrypoint; proposal document authored. | User asked to create new proposal and experiment scripts for prereg biased run with full gates, without modifying the published runner. |
| 2025-10-13 | Added prereg aggregation runner for Thermodynamic Routing v2 (multi-seed + robustness + gates). | Needed to programmatically enforce prereg gates and compute CIs across seeds and robustness sweeps while keeping the published runner unchanged. |
| 2025-10-13 | Switched Thermodynamic Routing v2 prereg runners to Neumann walls + open outlets, tightened RJ window, and hardened bias gates against zero-signal cases. | Periodic BCs and late RJ window suppressed outflux and modal texture, causing prereg gates to fail silently. Updating the spec and runners restores the intended boundary physics and prevents degenerate passes. |
| 2025-10-13 | Adopt probe-limit semantics: Void α walkers are non-invasive observers; labels ℓ are read-only metadata with no effect on dynamics; Void β (GDSP) consumes labels in deferred epochs to modify substrate. | Maintains theoretical clarity that walkers do not disturb the substrate; aligns Flux Through Memory Channels (frozen map) with Particle-Triad framing; introduces a two-phase schedule (observation, then GDSP actuation) preserving compliance and provenance. |
| 2025-10-13 | Added probe-limit runtime compliance items to Flux Through Memory Channels proposal. | Make the prereg explicit about read-only walkers, actuator exclusion, MemoryMap field delegation, and W×H→visits/edges/ttl mapping to preserve compatibility with canon and ensure auditable separation between probes and GDSP epochs. |
| 2025-10-13 | Added CSV artifact emission and artifact listing to FTMC runner; removed premature RESULTS page generation. | Enforce minimum artifact policy (1 figure + 1 CSV + 1 JSON) and prevent premature conclusions to comply with prereg and RESULTS standards. |
| 2025-10-13 | FTMC v1 runner: added determinism receipts (repeat-seed comparison), paired ΔB confidence intervals, dimensionless receipts (Pi_walk, Pi_hop, corridor_q), outflux floor gate, and drift_weight propagation across all simulations. | Implements guidance checklist for auditability and physics clarity; strengthens compliance reporting and ensures artifact minimum and gating are encoded in code. |
| 2025-10-13 | Approved new tag 'thermo-routing-v2-wave-meter' for domain 'thermo_routing' with script-scoped HMAC. | Set a non-empty tag_secret via interactive admin-gated flow; then stamped APPROVAL.json with schema path and approval_key derived from policy message domain:run_wave_flux_meter_v1:thermo-routing-v2-wave-meter. DB (public) updated accordingly. |
| 2025-10-13 | Wave Flux Meter A-phase fixed: true continuity residual and dynamic energy tolerance; strict io_paths routing; added passed/gates fields. | Implemented r = ∂_t e + ∇·s with centered ∂_t e and leapfrog-compatible energy density; set tol_E=200*(dt/a)^2 and tol_B=3*a^2+20*(dt/a)^2; wired figure/log/summary through common/io_paths with failed_runs routing; added top-level passed and per-gate booleans. |
| 2025-10-13 | Created Wave Flux Meter A-phase RESULTS document with pinned artifacts and numeric gate outcomes; instrument certified for closed-box energy/balance. | A-phase run passed with tol_E=0.0032 and tol_B≈0.0120; approvals and io_paths policies enforced; documenting results per standards before proceeding to open-port Phase B. |
| 2025-10-13 | Scaffolded Wave Flux Meter Phase B (open-ports) with absorber: runner, schema, spec, and proposal; prepared APPROVAL.json entry. | Proceeding to next phase per user request with approvals-first discipline; KPIs: power balance, symmetry null, absorber efficiency; artifacts via io_paths; tag thermo-routing-v2-wave-meter-openports requires approval. |
| 2025-10-13 | Wave Flux Meter Phase B (open-ports) run passed gates; artifacts produced via io_paths; approvals enforced. | Fixed schema top-level tag for validator; corrected unit scaling (line/area integrals) and used full boundary flux for power balance. KPIs: balance 0.0226≤0.1, symmetry 2.7e-15≤0.05, absorber_eff 1.32≥0.9. |
| 2025-10-22 | Adopted whitepaper-grade proposal for Intelligence Model Substrate v1; set tag 'im-substrate-v1'; added JSON schema and populated APPROVAL.json (proposal path + schema ref), no runner added pending approval. | User requires full proposal before any scaffolding. This enables formal approval without enabling execution, keeping policy intact. |
